<!DOCTYPE html>
<html>

<head>
    <title>Ilmanlaatu Helsingiss√§</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <style>
        html,
        body {
            margin: 0px;
            padding: 0px;
        }
        #vis {
            /* background: red; */
            height: 98dvh;
            width: 98dvw;
        }
    </style>
    <meta http-equiv="refresh" content="3600" />
</head>

<body>
    <div id="vis"></div>
    <script type="text/javascript">
        var yourVlSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "description": "PM10 air quality in Helsinki.",
            "data": {
                "url": "https://opendata.fmi.fi/timeseries?format=json&precision=double&groupareas=0&producer=airquality_urban&area=Helsinki&param=fmisid,time,PM10_PT1H_avg&starttime=-1d&endtime=-1m",
                "format": {
                    "parse": { "time": "utc:'%Y%m%dT%H%M%S'" }
                }
            },
            "width": "container",
            "height": "container",
            "autosize": {
                "type": "fit",
                "contains": "padding"
            },
            "mark": {
                "type": "line",
                "point": true
            },
            "encoding": {
                "x": {
                    "timeUnit": "utcdayhours",
                    "field": "time",
                    "type": "ordinal",
                    "title": null
                },
                "y": {
                    "aggregate": "mean",
                    "field": "PM10_PT1H_avg",
                    "type": "quantitative",
                    "title": "PM10"
                },
                "color": {
                    "field": "fmisid",
                    "type": "nominal",
                    "legend": null
                }
            }
        };
        vegaEmbed('#vis', yourVlSpec);
    </script>
</body>

</html>